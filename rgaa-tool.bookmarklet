function%20getFigCaption(element){if(element.parentElement===null)return%20null%3Bif(element.nodeName.toLowerCase()===%22figcaption%22)return%20null%3Bif(element.nodeName.toLowerCase()!==%22figure%22){return%20getFigCaption(element.parentElement)}const%20figCaption=element.querySelector(%22figcaption%22)%3Bif(figCaption===null)return%20null%3Breturn%20removeLineReturn(figCaption.innerText)}function%20convertSize(width,height,maxWidth,maxHeight){const%20rx=maxWidth%2Fwidth%3Bconst%20ry=maxHeight%2Fheight%3Bconst%20ratio=Math.min(rx,ry)%3Breturn[width%2Aratio,height%2Aratio]}function%20createDataThumbnail(src,maxWidth,maxHeight,callback){const%20image=new%20Image%3Bimage.crossOrigin=%22Anonymous%22%3Bimage.onload=function(){const%20canvas=document.createElement(%22canvas%22)%3Bconst%20context=canvas.getContext(%222d%22)%3Bconst[width,height]=convertSize(this.naturalWidth,this.naturalHeight,maxWidth,maxHeight)%3Bcanvas.width=width%3Bcanvas.height=height%3Bcontext.drawImage(this,0,0,width,height)%3Bconst%20dataURL=canvas.toDataURL(%22image%2Fpng%22)%3Bcallback(dataURL,width,height)}%3Bimage.src=src}function%20extractImages(){const%20elements=document.createDocumentFragment()%3Bconst%20title=document.createElement(%22h1%22)%3Btitle.innerText=%22Images%22%3Belements.appendChild(title)%3Bconst%20table=document.createElement(%22table%22)%3Btable.classList.add(%22images-table%22)%3Bconst%20images=document.querySelectorAll(%22img%22)%3Bfor(let%20image%20of%20images){let%20row=document.createElement(%22tr%22)%3Bif(isHidden(image)){row.classList.add(%22is-hidden%22)}else{row.classList.add(%22is-visible%22)}let%20content=document.createElement(%22td%22)%3Bcontent.classList.add(%22image-content%22)%3Blet%20div=document.createElement(%22div%22)%3Bcontent.appendChild(div)%3BcreateDataThumbnail(image.getAttribute(%22src%22),150,150,(dataURL,width,height)=%3E{const%20thumbnail=document.createElement(%22img%22)%3Bthumbnail.setAttribute(%22src%22,dataURL)%3Bthumbnail.setAttribute(%22width%22,width)%3Bthumbnail.setAttribute(%22height%22,height)%3Bdiv.appendChild(thumbnail)})%3Brow.appendChild(content)%3Blet%20alt=document.createElement(%22td%22)%3Balt.classList.add(%22image-alt%22)%3Blet%20altValue=image.getAttribute(%22alt%22)%3Bif(altValue===null){alt.innerText=%22%E2%9D%8E%22}else%20if(altValue.trim()===%22%22){alt.innerText=%22empty%20alt%22%3Balt.classList.add(%22is-hidden%22)}else{alt.innerText=altValue}row.appendChild(alt)%3Blet%20figCaption=document.createElement(%22td%22)%3BfigCaption.classList.add(%22image-figcaption%22)%3Blet%20figCaptionValue=getFigCaption(image)%3Bif(figCaptionValue===null){figCaption.innerText=%22no%20figcaption%22%3BfigCaption.classList.add(%22is-hidden%22)}else{figCaption.innerText=figCaptionValue}row.appendChild(figCaption)%3Btable.appendChild(row)}elements.appendChild(table)%3Breturn%20elements}function%20createPopup(fragment,styles){const%20copyTab=window.open(%22%22,%22_blank%22,%22popup%22).document%3BcopyTab.title=%22RGAA%20Tool%22%3Bconst%20encoding=document.createElement(%22meta%22)%3Bencoding.setAttribute(%22charset%22,%22UTF-8%22)%3BcopyTab.head.appendChild(encoding)%3BcopyTab.head.appendChild(styles)%3BcopyTab.body.appendChild(fragment)%3BcopyTab.close()}function%20removeLineReturn(string){if(string===null)return%20null%3Breturn%20string.replace(%2F(%20%2A(%5Cr%5Cn%7C%5Cn%7C%5Cr)%20%2A)%2B%2Fgm,%22%5Cn%22).trim().replace(%2F(.)%5Cn(.)%2Fgm,%22%241.%20%242%22)}function%20getText(element){const%20text=removeLineReturn(element.innerText)%3Bif(text)return%20text%3Bconst%20image=element.querySelector(%22img[alt]%22)%3Bif(image%26%26image.getAttribute(%22alt%22).trim()!==%22%22){return%22%F0%9F%96%BC%20%22%2Bimage.getAttribute(%22alt%22)}const%20title=removeLineReturn(element.getAttribute(%22title%22))%3Bif(title)return%22%F0%9F%86%8E%22%3Breturn%22%E2%9D%8E%22}const%20styles=%60%3Aroot{--stripes%3Arepeating-linear-gradient(45deg,%23fff,%23fff%201em,%23eee%201em,%23eee%202em)%3B--checker-color-1%3Agray%3B--checker-color-2%3Alightgray%3B--checker-size%3A.5em%3B--checker-gradient%3Alinear-gradient(45deg,var(--checker-color-1)%2025%25,transparent%2025%25,transparent%2075%25,var(--checker-color-1)%2075%25)}body{font-family%3Asans-serif}.h1,.h2,.h3,.h4,.h5,.h6{font-size%3A1rem%3Bfont-weight%3Anormal%3Bcolor%3Ablack}.h1.is-hidden,.h2.is-hidden,.h3.is-hidden,.h4.is-hidden,.h5.is-hidden,.h6.is-hidden{color%3Agray%3Bbackground-color%3A%23eee}.h1%3A%3Abefore,.h2%3A%3Abefore,.h3%3A%3Abefore,.h4%3A%3Abefore,.h5%3A%3Abefore,.h6%3A%3Abefore{display%3Ablock%3Bpadding%3A0%200%20.5rem%200%3Bposition%3Aabsolute%3Bleft%3A0%3Bmargin-top%3A-0.15em%3Bfont-size%3A150%25}.h1%3A%3Abefore{content%3A%22%E2%9D%B6%22%3Bcolor%3Ablue}.h2%3A%3Abefore{content%3A%22%E2%9D%B7%22%3Bcolor%3Agreen}.h3%3A%3Abefore{content%3A%22%E2%9D%B8%22%3Bcolor%3Aorange}.h4%3A%3Abefore{content%3A%22%E2%9D%B9%22%3Bcolor%3Ared}.h5%3A%3Abefore{content%3A%22%E2%9D%BA%22%3Bcolor%3Ablack}.h6%3A%3Abefore{content%3A%22%E2%9D%BB%22%3Bcolor%3Ablack}.h1.is-hidden%3A%3Abefore,.h2.is-hidden%3A%3Abefore,.h3.is-hidden%3A%3Abefore,.h4.is-hidden%3A%3Abefore,.h5.is-hidden%3A%3Abefore,.h6.is-hidden%3A%3Abefore{color%3Agray%3Bfont-style%3Anormal}.links-table{border-collapse%3Acollapse}.links-table%20td{border%3A1px%20solid%20gray%3Bpadding%3A.2rem%20.3rem}td.link-href{font-size%3A80%25}td.is-hidden{color%3Agray%3Bfont-style%3Aitalic}.links-table{background%3Avar(--stripes)}tr.is-visible{background-color%3Awhite}tr.is-hidden{color%3Agray%3Bbackground-color%3Atransparent}.images-table{border-collapse%3Acollapse}.images-table%20td{border%3A1px%20solid%20gray%3Bpadding%3A.2rem%20.3rem}.image-content%3Ediv{background-color%3Avar(--checker-color-2)%3Bbackground-image%3Avar(--checker-gradient),var(--checker-gradient)%3Bbackground-position%3A0%200,var(--checker-size)%20var(--checker-size)%3Bbackground-size%3Acalc(var(--checker-size)%20%2A%202)%20calc(var(--checker-size)%20%2A%202)}%60%3Bfunction%20getStyles(){const%20style=document.createElement(%22style%22)%3Bstyle.innerText=styles%3Breturn%20style}function%20isHidden(element){const%20styles=window.getComputedStyle(element)%3Bconst%20hidden=styles.display===%22none%22%7C%7Cstyles.visibility===%22hidden%22%3Bif(element.parentElement===null){return%20hidden}else%20if(!hidden){return%20isHidden(element.parentElement)}else{return%20true}}function%20extractLinks(){const%20elements=document.createDocumentFragment()%3Bconst%20title=document.createElement(%22h1%22)%3Btitle.innerText=%22Links%22%3Belements.appendChild(title)%3Bconst%20links=document.getElementsByTagName(%22a%22)%3Bconst%20table=document.createElement(%22table%22)%3Btable.classList.add(%22links-table%22)%3Bfor(let%20link%20of%20links){if(link.href===%22%22)continue%3Blet%20row=document.createElement(%22tr%22)%3Bif(isHidden(link)){row.classList.add(%22is-hidden%22)}else{row.classList.add(%22is-visible%22)}let%20text=document.createElement(%22td%22)%3Btext.classList.add(%22link-text%22)%3Btext.innerText=getText(link)%3Brow.appendChild(text)%3Blet%20title=document.createElement(%22td%22)%3Btitle.classList.add(%22link-title%22)%3Bif(link.title.trim()){title.innerText=link.title}else{title.innerText=%22no%20title%22%3Btitle.classList.add(%22is-hidden%22)}row.appendChild(title)%3Blet%20href=document.createElement(%22td%22)%3Bhref.classList.add(%22link-href%22)%3Bhref.innerText=link.href%3Brow.appendChild(href)%3Btable.appendChild(row)}elements.appendChild(table)%3Breturn%20elements}const%20levels={h1%3A0,h2%3A1,h3%3A2,h4%3A3,h5%3A4,h6%3A5}%3Bfunction%20buryInUL(level,element){if(!(level%20in%20levels))return%20element%3Blet%20parent%3Bfor(let%20step=0%3Bstep%3Clevels[level]%3Bstep%2B%2B){parent=document.createElement(%22ul%22)%3Bparent.appendChild(element)%3Belement=parent}return%20element}function%20extractHeadings(){const%20elements=document.createDocumentFragment()%3Bconst%20title=document.createElement(%22h1%22)%3Btitle.innerText=%22Headings%22%3Belements.appendChild(title)%3Bconst%20headingElements=document.createElement(%22ul%22)%3BheadingElements.classList.add(%22heading-list%22)%3Bconst%20headings=document.querySelectorAll(%22h1,h2,h3,h4,h5,h6%22)%3Bfor(let%20heading%20of%20headings){let%20element=document.createElement(%22li%22)%3Belement.innerText=getText(heading)%3Belement=buryInUL(heading.nodeName.toLowerCase(),element)%3Belement.classList.add(heading.nodeName)%3Bif(isHidden(heading)){element.classList.add(%22is-hidden%22)}else{element.classList.add(%22is-visible%22)}headingElements.appendChild(element)}elements.appendChild(headingElements)%3Breturn%20elements}function%20scrollSlowlyTillTheEnd(previous,delay,final){const%20current=window.pageYOffset%3Bif(current===previous){final()}else{window.scrollBy(0,window.innerHeight)%3BsetTimeout(()=%3E{scrollSlowlyTillTheEnd(current,delay,final)},delay)}}window.scrollTo(0,0)%3BscrollSlowlyTillTheEnd(-1,200,()=%3E{const%20elements=document.createDocumentFragment()%3Belements.appendChild(extractLinks())%3Belements.appendChild(extractHeadings())%3Belements.appendChild(extractImages())%3BcreatePopup(elements,getStyles())%3Bwindow.scrollTo(0,0)})%3B%0A